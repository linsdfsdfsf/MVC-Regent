<?xml version="1.0" encoding="utf-8" ?>
<dataOperations xmlns="http://www.w3.org/DataOperation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <dataCommand name="GetOrderByPage" database="MSP_SYS" commandType="Text">
    <commandText>
      <![CDATA[
      select a.* from REGENT_BS.orderm a 
      where 
      (UPPER(A.ORDERM_ID) LIKE '%'|| UPPER(:ORDERM_ID) || '%' OR :ORDERM_ID IS NULL)
      AND
      (UPPER(A.BOOKING_TYPE) LIKE '%'|| UPPER(:BOOKING_TYPE) || '%' OR :BOOKING_TYPE IS NULL)
      And
      (A.BOOKING_STATUS LIKE '%'|| :BOOKING_STATUS || '%' OR :BOOKING_STATUS IS NULL)
      AND
      (TO_DATE(A.BOOKING_DATE,'YYYY/MM/DD')>=TO_DATE(:BOOKING_DATE_B,'YYYY/MM/DD') OR :BOOKING_DATE_B IS NULL)
      AND
      (TO_DATE(A.BOOKING_DATE,'YYYY/MM/DD')<=TO_DATE(:BOOKING_DATE_E,'YYYY/MM/DD') OR :BOOKING_DATE_E IS NULL)
			]]>
    </commandText>
    <parameters>
      <param name=":ORDERM_ID" dbType="String"/>
      <param name=":BOOKING_TYPE" dbType="String"/>
      <param name=":BOOKING_DATE_B" dbType="String"/>
      <param name=":BOOKING_DATE_E" dbType="String"/>
      <param name=":BOOKING_STATUS" dbType="String"/>
    </parameters>
  </dataCommand>
  
  <dataCommand name="GetOrderByOrdermId" database="MSP_SYS" commandType="Text">
    <commandText>
      <![CDATA[
      select a.* from REGENT_BS.orderm a 
      where 
      (UPPER(A.ORDERM_ID) LIKE '%'|| UPPER(:ORDERM_ID) || '%' OR :ORDERM_ID IS NULL)
			]]>
    </commandText>
    <parameters>
      <param name=":ORDERM_ID" dbType="String"/>
    </parameters>
  </dataCommand>

  <dataCommand name="GetRestaurant" database="MSP_SYS" commandType="Text">
    <commandText>
      <![CDATA[
      select RESTAURANT_ID,RESTAURANT_NAME from regent_bs.restaurant_m WHERE RESTAURANT_STATUS='1'
			]]>
    </commandText>
  </dataCommand>

  <dataCommand name="GetPurpose" database="MSP_SYS" commandType="Text">
    <commandText>
      <![CDATA[
      select D.PARAMETER_VALUE, D.PARAMETER_TEXT
        from regent_bs.parameter_d D
          WHERE D.PARAMETER_M_ID =
             (SELECT M.PARAMETER_M_ID
                FROM REGENT_BS.PARAMETER_M M
              WHERE M.PARAMETER_GROUP_NAME = '用餐目的')
              order by d.parameter_sort
			]]>
    </commandText>
  </dataCommand>

  <dataCommand name="GetOpenSeatEndDate" database="MSP_SYS" commandType="Text">
    <commandText>
      <![CDATA[
select D.PARAMETER_VALUE
  from regent_bs.parameter_d D
 WHERE D.PARAMETER_M_ID =
       (SELECT M.PARAMETER_M_ID
          FROM REGENT_BS.PARAMETER_M M
         WHERE M.PARAMETER_GROUP_NAME = '開放訂位期限')
         AND ROWNUM = 1
         order by d.parameter_sort
			]]>
    </commandText>
  </dataCommand>

  <dataCommand name="AjaxGetDailyPeriodId" database="MSP_SYS" commandType="Text">
    <commandText>
      <![CDATA[
      SELECT D.DAILY_PERIOD_ID,D.PERIOD_NAME,M.PERIOD_GROUP_NAME
        FROM REGENT_BS.DAILY_PERIOD D
          LEFT JOIN REGENT_BS.PERIOD_GROUP_M M
          ON M.PERIOD_GROUP_ID=D.PERIOD_GROUP_ID
       WHERE 
        (UPPER(D.RESTAURANT_ID)= UPPER(:RESTAURANT_ID)  OR :RESTAURANT_ID IS NULL)
         AND 
         (UPPER(D.BOOKING_DATE)= UPPER(:BOOKING_DATE)  OR :BOOKING_DATE IS NULL)
         AND D.PEROID_STATUS='1'
         ORDER BY PERIOD_NAME
			]]>
    </commandText>
    <parameters>
      <param name=":RESTAURANT_ID" dbType="String"/>
      <param name=":BOOKING_DATE" dbType="String"/>
    </parameters>
  </dataCommand>

</dataOperations>