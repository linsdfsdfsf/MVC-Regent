DROP TABLE MSP_SYS.D_MENU CASCADE CONSTRAINTS;

CREATE TABLE MSP_SYS.D_MENU
(
  MENU_ID        INTEGER                        NOT NULL,
  P_MENU_ID      INTEGER                        NOT NULL,
  MENU_NAME      VARCHAR2(50 BYTE),
  MENU_URL       VARCHAR2(50 BYTE),
  MENU_SEQ       NUMBER,
  MENU_LEVEL     NUMBER,
  MENU_REMARK    VARCHAR2(50 BYTE),
  MENU_SUB_NAME  VARCHAR2(50 BYTE),
  IS_VALID       INTEGER,
  CREATE_DATE    DATE                           NOT NULL,
  CREATE_BY      VARCHAR2(20 BYTE)              NOT NULL,
  LASTEDIT_DATE  DATE,
  LASTEDIT_BY    VARCHAR2(20 BYTE)
)
TABLESPACE MSP_SYS_DAT
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          1M
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

COMMENT ON TABLE MSP_SYS.D_MENU IS '用户主表';

COMMENT ON COLUMN MSP_SYS.D_MENU.MENU_ID IS '菜单ID';

COMMENT ON COLUMN MSP_SYS.D_MENU.P_MENU_ID IS '菜单父ID';

COMMENT ON COLUMN MSP_SYS.D_MENU.MENU_NAME IS '菜单名称';

COMMENT ON COLUMN MSP_SYS.D_MENU.MENU_URL IS '菜单URL';

COMMENT ON COLUMN MSP_SYS.D_MENU.MENU_SEQ IS '菜单排序';

COMMENT ON COLUMN MSP_SYS.D_MENU.MENU_LEVEL IS '菜单级别';

COMMENT ON COLUMN MSP_SYS.D_MENU.MENU_REMARK IS '菜单备注';

COMMENT ON COLUMN MSP_SYS.D_MENU.MENU_SUB_NAME IS '菜单次名称';

COMMENT ON COLUMN MSP_SYS.D_MENU.IS_VALID IS '菜单是否有效，1有效；0，无效；';

COMMENT ON COLUMN MSP_SYS.D_MENU.CREATE_DATE IS '创建日期';

COMMENT ON COLUMN MSP_SYS.D_MENU.CREATE_BY IS '修改人';

COMMENT ON COLUMN MSP_SYS.D_MENU.LASTEDIT_DATE IS '最后修改时间';

COMMENT ON COLUMN MSP_SYS.D_MENU.LASTEDIT_BY IS '最后修改人';


CREATE UNIQUE INDEX MSP_SYS.D_MENU_PK ON MSP_SYS.D_MENU
(MENU_ID)
LOGGING
TABLESPACE MSP_SYS_DAT
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          1M
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE TRIGGER MSP_SYS.TR_D_MENU
   BEFORE INSERT
   ON MSP_SYS.D_MENU    FOR EACH ROW
BEGIN
   SELECT SEQ_D_MENU.NEXTVAL INTO :NEW.MENU_ID FROM DUAL;
END TR_D_MENU;
/
